<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LLMPages API Test</title>
  <!-- Bootstrap 5 CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      padding: 2rem;
    }
    #loading {
      display: none;
    }
    #result {
      white-space: pre-wrap;
      background-color: #f8f9fa;
      padding: 1rem;
      border-radius: 0.25rem;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="mb-4">LLMPages API Test</h1>
    <p class="mb-3">This tool allows you to send a prompt to the LLMPages API and view the response.</p>
    <form id="apiForm" class="mb-3">
      <div class="mb-3">
        <label for="promptInput" class="form-label">Prompt</label>
        <textarea class="form-control" id="promptInput" rows="4" placeholder="Enter your prompt here..."></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Send Request</button>
      <div id="loading" class="spinner-border text-primary ms-3" role="status" style="width: 1.5rem; height: 1.5rem;">
        <span class="visually-hidden">Loading...</span>
      </div>
    </form>
    <div class="mb-3">
      <h5>Response:</h5>
      <div id="result" class="border"></div>
    </div>
    <div id="errorMsg" class="text-danger"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('apiForm');
      const promptInput = document.getElementById('promptInput');
      const resultDiv = document.getElementById('result');
      const loadingSpinner = document.getElementById('loading');
      const errorMsgDiv = document.getElementById('errorMsg');

      // Parse URL parameters if any
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.has('prompt')) {
        promptInput.value = urlParams.get('prompt');
      }

      // Function to show loading
      function showLoading(show) {
        loadingSpinner.style.display = show ? 'inline-block' : 'none';
      }

      // Function to display error
      function showError(message) {
        errorMsgDiv.textContent = message;
      }

      // Function to clear messages
      function clearMessages() {
        errorMsgDiv.textContent = '';
        resultDiv.textContent = '';
      }

      // Simulated API endpoint (for demonstration purposes)
      const API_URL = 'https://api.example.com/llmpages'; // Replace with actual API URL if available

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        clearMessages();

        const promptText = promptInput.value.trim();
        if (!promptText) {
          showError('Please enter a prompt.');
          return;
        }

        showLoading(true);

        try {
          // Prepare payload
          const payload = {
            prompt: promptText
          };

          // Make POST request
          const response = await fetch(API_URL, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(payload)
          });

          if (!response.ok) {
            throw new Error(`API error: ${response.status} ${response.statusText}`);
          }

          const data = await response.json();

          // Assuming the response has a 'response' field
          if (data && data.response) {
            resultDiv.textContent = data.response;
          } else {
            resultDiv.textContent = 'No response data received.';
          }
        } catch (err) {
          showError(`Error: ${err.message}`);
        } finally {
          showLoading(false);
        }
      });
    });
  </script>
  <!-- Bootstrap 5 JS Bundle CDN (includes Popper) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>